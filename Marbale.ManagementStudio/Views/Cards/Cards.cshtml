@model Marbale.BusinessObject.Cards.CardsModel
@{
    Layout = null;
}

<div class="modal-header">
    <h4 class="modal-title">New Card</h4>
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="min-width: 10px !important;">&times;</button>
</div>
<div class="modal-body">
    @using (Html.BeginForm("InsertOrUpdateCards", "Cards", FormMethod.Post, new { id = "cardForm" }))
    {
        <div>
            <b style="color: cadetblue">Main</b>
            <div id="mainclass" style="border: 2px solid black; border-color: cornsilk">
                <div class="form-group row">

                    <div class="col-md-1">
                        <label for="ex1"><b>CardId:</b></label>
                        @Html.TextBoxFor(m => m.CardId, new { @readonly = "readonly", @class = "form-control" })

                    </div>
                    <div class="col-md-2">
                        <label for="ex2"><b>CardNumber:</b></label>
                        @Html.TextBoxFor(m => m.CardNumber, new { @class = "form-control", placeholder = @Html.DisplayNameFor(n => n.CardNumber) })
                        @Html.ValidationMessageFor(model => model.CardNumber, "", new { @class = "text-danger" })
                    </div>

                    <div class="col-md-2">
                        <label for="ex3"><b>IssueDate:</b></label>
                        @Html.TextBoxFor(m => m.IssueDateP, new { @class = "form-control datepicker" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex3"><b>FaceValue:</b></label>
                        @Html.TextBoxFor(m => m.FaceValue, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.FaceValue, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex4"><b>Customer:</b></label>
                        @Html.TextBoxFor(m => m.Customer, new { @class = "form-control" })
                    </div>
                    <div class="col-md-1">
                        <label for="ex4"><b>VIP Customer:</b></label>
                        @Html.CheckBoxFor(m => m.VIPCustomer, new { @class = "form-control", @style = "position:absolute;width:20px;" })
                    </div>

                </div>
            </div>

            <b style="color: cadetblue">Value</b>
            <div id="valueclass" style="border: 2px solid black; border-color: cornsilk">
                <div class="form-group row">

                    <div class="col-md-2">
                        <label for="ex1"><b>Credits:</b></label>
                        @Html.TextBoxFor(m => m.Credits, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.Credits, "", new { @class = "text-danger" })

                    </div>
                    <div class="col-md-2">
                        <label for="ex2"><b>Credit Plus:</b></label>
                        @Html.TextBoxFor(m => m.CreditPlus, new { @class = "form-control", placeholder = @Html.DisplayNameFor(n => n.CreditPlus) })
                        @Html.ValidationMessageFor(model => model.CreditPlus, "", new { @class = "text-danger" })
                    </div>

                    <div class="col-md-2">
                        <label for="ex3"><b>Courtesy:</b></label>
                        @Html.TextBoxFor(m => m.Courtesy, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.Courtesy, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex3"><b>Bonus:</b></label>
                        @Html.TextBoxFor(m => m.Bonus, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.Bonus, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex4"><b>CreditsPlayed:</b></label>
                        @Html.TextBoxFor(m => m.CreditsPlayed, new { @class = "form-control" })
                    </div>

                </div>
            </div>

            <b style="color: chocolate">Game Time</b>  <b style="color: darkblue; position: absolute; right: 475px">Refund/Expiry</b>

            <div id="gametimeclass" style="border: 2px solid black; border-color: cornsilk">
                <div class="form-group row">
                    <div class="col-md-2">
                        <label for="ex1"><b>StartTime:</b></label>
                        @Html.TextBoxFor(m => m.StartTime, new { @class = "form-control datepicker" })

                    </div>
                    <div class="col-md-2">
                        <label for="ex2"><b>Last Play time:</b></label>
                        @Html.TextBoxFor(m => m.LastPlayTime, new { @class = "form-control datepicker", placeholder = @Html.DisplayNameFor(n => n.LastPlayTime) })
                    </div>

                    <div class="col-md-2">
                        <label for="ex1"><b>Expiry Date:</b></label>
                        @Html.TextBoxFor(m => m.ExpiryDate, new { @class = "form-control datepicker" })

                    </div>
                    <div class="col-md-3">
                        <label for="ex3"><b>Refund Amount:</b></label>
                        @Html.TextBoxFor(m => m.RefundAmount, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.RefundAmount, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex2"><b>Refund Date:</b></label>
                        @Html.TextBoxFor(m => m.RefundDate, new { @class = "form-control datepicker" })
                    </div>
                </div>
            </div>

            <b style="color: deeppink">Ticket</b>
            <div id="ticketclass" style="border: 2px solid black; border-color: cornsilk">
                <div class="form-group row">
                    <div class="col-md-3">
                        <label for="ex1"><b>Ticket Count:</b></label>
                        @Html.TextBoxFor(m => m.TicketCount, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.TicketCount, "", new { @class = "text-danger" })

                    </div>
                    <div class="col-md-3">
                        <label for="ex3"><b>Ticket Allowed:</b></label>
                        @Html.CheckBoxFor(m => m.TicketAllowed, new { @class = "form-control" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex2"><b>Real Ticket Mode:</b></label>
                        @Html.CheckBoxFor(m => m.RealTicketMode, new { @class = "form-control" })
                    </div>
                </div>
            </div>


            <b style="color: deeppink">miscellaneous</b>
            <div id="miscolaniuseclass" style="border: 2px solid black; border-color: cornsilk">
                <div class="form-group row">
                    <div class="col-md-3">
                        <label for="ex1"><b>Last Updated Time:</b></label>
                        @Html.TextBoxFor(m => m.LastUpdatedTime, new { @class = "form-control datepicker" })

                    </div>
                    <div class="col-md-3">
                        <label for="ex3"><b>Last Updated By:</b></label>
                        @Html.TextBoxFor(m => m.LastUpdatedBy, new { @class = "form-control" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex2"><b>Notes:</b></label>
                        @Html.TextAreaFor(m => m.Note, 2, 10, new { @class = "form-control" })
                    </div>
                </div>
            </div>
            <b style="color: lightseagreen">Technician</b>
            <div id="technicianclass" style="border: 2px solid black; border-color: cornsilk">
                <div class="form-group row">
                    <div class="col-md-3">
                        <label for="ex2"><b>Tech Card Type:</b></label>
                        @Html.DropDownListFor(m => m.TechCardType, new SelectList((List<Marbale.BusinessObject.IdValue>)Session["TechCardType"], "Id", "Value"), new { @class = "form-control" })

                    </div>
                    <div class="col-md-3">
                        <label for="ex3"><b>Tech Game:</b></label>
                        @Html.TextBoxFor(m => m.TechGames, new { @class = "form-control" })
                    </div>
                    <div class="col-md-2">
                        <label for="ex2"><b>Timer Reset Card:</b></label>
                        @Html.CheckBoxFor(m => m.TimerResetCard, new { @class = "form-control check-boxs" })
                    </div>
                </div>
            </div>
        </div>
    }
</div>
<div class="modal-footer">
    <button id="update" type="submit" class="btn btn-primary" onclick="Save(this)">Save</button>
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
@*<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>*@
<script type="text/javascript">
    $(document).ready(function () {
        $('.modal-body').css({
            'width': '900px;',
            'height': '500px',
            'overflow-y': 'scroll'
        });
        $(document).off('focusin.modal');
        //$('#newcardmodel').modal('show');
    })
    //var $j = jQuery.noConflict();
    $(function () {
        $(".datepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            "setDate": new Date()
        });
    });
    $('.close').click(function () {
        location.reload();

    });
    //$j('#ExpiryDate').datepicker();
    $('.check-boxs').change(function () {
        if ($('#TimerResetCard').is(':checked')) {
            $("#TechCardType").prop("disabled", true);
        }
        else {
            $("#TechCardType").prop("disabled", false);
        }

    });
    function Save(btnClicked) {
        var $form = $('#cardForm');
        $.ajax({
            type: "POST",
            url: $form.attr('action'),
            data: $form.serialize(),
            error: function (xhr, status, error) {
                //do something about the error
            },
            success: function (response) {
                //do something with response
                alert('Data saved');

            }
        });
        return false;// if it's a link to prevent post
    }
</script>
